#!/bin/bash

START_PATH=/users/aanavarroa/original_gitrepos/TF_MomentsML_experiments/TF_scripts_2comp
COMMAND=$START_PATH/TF_run_euclidlike_2comp.py

WORK_PATH=/vol/euclidraid4/data/aanavarroa/trainings_eu_2comp-flagship0.05/g-grid-sexcat-nw-ss_15nodes_perc0.9_sexdet1.0

POINT_MODEL_WEIGHTS=$WORK_PATH/training/members/_bestmember/bestmember_weights.ckpt
G_NORMER=$WORK_PATH/training/normers/tp_input_adamom_g1adamom_g2adamom_sigmaadamom_fluxadamom_rho4skymad_normer.pkl

G_CONFIG=$START_PATH/g_15x15.cfg
CATS_MOM=/vol/euclidraid4/data/aanavarroa/catalogs/MomentsML/fullimages_constimg_euclid-flagship0.05
G_CAT=$CATS_MOM/tp-bulgedisk-constpsf-constback-grid/adamom_sexcat_nw_ss1.0/groupcat.fits
G_VCAT=$CATS_MOM/tp-bulgedisk-constpsf-constback-grid/adamom_sexcat_nw_ss1.0/groupcat.fits
#G_VCAT=/vol/euclidraid4/data/aanavarroa/catalogs/MomentsML/fullimages_constimg_euclid-flagship0.05/vp-bulgedisk-constpsf-constback-grid/adamom_trucat_nw_ss/groupcat.fits 
G_FEATURES=("adamom_g1" "adamom_g2" "adamom_sigma" "adamom_flux" "adamom_rho4" "skymad")
TARGETS=("tru_s1" "tru_s2")
EPOCHS=100000
FINE_EPOCHS=10000
LEARNING_RATE=0.1

cd $START_PATH

python $COMMAND  --workdir=$WORK_PATH --g_config=$G_CONFIG --g_features ${G_FEATURES[@]} --targets ${TARGETS[@]} --g_cat=$G_CAT --g_vcat=$G_VCAT --epochs=$EPOCHS --fine_epochs=$FINE_EPOCHS --learning_rate=$LEARNING_RATE --tru_type=2 --validate_g #--train_g --finetune --use_val --nbatch=10 #--cut=24
 
